language: java
sudo: required
addons:
  postgresql: 9.3
services:
  - couchdb
  - rabbitmq
install:
  - ./travis_couchdb_lucene.sh
before_script:
      - psql -c "ALTER USER postgres WITH PASSWORD 'password'" -U postgres
      - curl -X PUT http://localhost:5984/_config/admins/opensrp -d '"opensrp"'
      - sudo service couchdb restart
      - nohup /home/travis/build/OpenSRP/opensrp-server/couchdb-lucene-1.1.0/target/couchdb-lucene-1.1.0/bin/run > /dev/null 2>&1 &
script:
  - javac -version
  - java -version
  - mvn --version
  - mvn clean install
